"use strict";(()=>{var e={};e.id=652,e.ids=[652],e.modules={3524:e=>{e.exports=require("@prisma/client")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},5155:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>q,originalPathname:()=>Z,patchFetch:()=>E,requestAsyncStorage:()=>y,routeModule:()=>w,serverHooks:()=>v,staticGenerationAsyncStorage:()=>j,staticGenerationBailout:()=>x});var n={};t.r(n),t.d(n,{DELETE:()=>m,GET:()=>g,POST:()=>h,dynamic:()=>p});var o=t(5419),i=t(9108),a=t(9678),s=t(8070),l=t(3524),c=t(7147),u=t(1017),d=t.n(u);let p="force-dynamic",f=new l.PrismaClient;async function g(e){try{let{searchParams:r}=new URL(e.url),t="true"===r.get("all"),n=await f.client.findMany({where:t?{}:{active:!0},orderBy:{order:"asc"}});return s.Z.json(n)}catch(e){return console.error("Error fetching clients:",e),s.Z.json({error:"Failed to fetch clients"},{status:500})}}async function h(e){try{let{name:r,logo:t,website:n,order:o}=await e.json();if(!r||!t)return s.Z.json({error:"Name and logo are required"},{status:400});let i=await f.client.create({data:{name:r,logo:t,website:n||null,order:parseInt(o)||0,active:!0}});return s.Z.json(i)}catch(e){return console.error("Error creating client:",e),s.Z.json({error:"Failed to create client"},{status:500})}}async function m(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id");if(!t)return s.Z.json({error:"Client ID is required"},{status:400});let n=await f.client.findUnique({where:{id:parseInt(t)}});if(!n)return s.Z.json({error:"Client not found"},{status:404});if(n.logo&&n.logo.includes("/uploads/"))try{let e=d().join(process.cwd(),"public",n.logo);await c.promises.unlink(e),console.log("Logo file deleted:",e)}catch(e){console.log("Logo file not found or already deleted:",e)}return await f.client.delete({where:{id:parseInt(t)}}),s.Z.json({success:!0})}catch(e){return console.error("Error deleting client:",e),s.Z.json({error:"Failed to delete client"},{status:500})}}let w=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/clients/route",pathname:"/api/clients",filename:"route",bundlePath:"app/api/clients/route"},resolvedPagePath:"C:\\Users\\bolba\\OneDrive\\Desktop\\mm-finale\\mmhiring\\app\\api\\clients\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:j,serverHooks:v,headerHooks:q,staticGenerationBailout:x}=w,Z="/api/clients/route";function E(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:j})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[638,206],()=>t(5155));module.exports=n})();